{% extends "base.html" %}

{% block title %}
    <title>Home</title>
{% endblock %}

{% block content %}
	<h1>TODO List</h1>
	<a href="{% url 'todo-app:create-task' %}">Add Task</a>

	<ul>
		{% for task in tasks %}
			<li>
				{{ task.content }} - {{ task.created_at }} {% if task.deadline %}(Deadline: {{ task.deadline }}){% endif %}
				<br>
				Tags: 
				{% for tag in task.tags.all %}
					{{ tag.name }}{% if not forloop.last %}, {% endif %}
				{% endfor %}
				<br>
				<a href="{% url 'todo-app:update-task' task.id %}">Update</a>
				<a href="{% url 'todo-app:delete-task' task.id %}">Delete</a>
				<form method="post" action="{% url 'todo-app:home' %}">
					{% csrf_token %}
					<input type="hidden" name="task_id" value="{{ task.id }}">
					{% if task.done %}
						<button type="submit" class="btn btn-warning">Undo</button>
					{% else %}
						<button type="submit" class="btn btn-success">Complete</button>
					{% endif %}
				</form>
			</li>
		{% endfor %}
	</ul>
    
{% endblock %}
